<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Print Quote Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Database Connection Status -->
    <div id="db-status" class="db-status disconnected">
        <div class="db-status-indicator"></div>
        <span class="db-status-text">No database connected</span>
        <button class="db-status-btn" id="connect-db-btn">Connect</button>
    </div>

    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">3D</div>
                <span>PrintQuote</span>
            </div>
            <nav class="nav-menu">
                <button class="nav-item active" data-page="quote">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 7h6m-6 4h6m-6 4h4M5 3h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2z"/>
                    </svg>
                    Quote Calculator
                </button>
                <button class="nav-item" data-page="printers">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 9V2h12v7M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"/>
                        <rect x="6" y="14" width="12" height="8"/>
                    </svg>
                    Printers
                </button>
                <button class="nav-item" data-page="materials">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                    Materials
                </button>
                <button class="nav-item" data-page="tutorial">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 20h9M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/>
                    </svg>
                    Tutorial
                </button>
            </nav>
            <div class="sidebar-footer">
                <div class="version">v2.0</div>
                <a href="https://github.com/sponsors/rogeriocamorim" target="_blank" rel="noopener noreferrer" class="sponsor-link">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    <span>Sponsor</span>
                </a>
                <a href="https://github.com/rogeriocamorim/3dPrinterCalculator/issues" target="_blank" rel="noopener noreferrer" class="issues-link">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v6M12 16h.01"/>
                    </svg>
                    <span>Report Issue</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Quote Page -->
            <div id="quote-page" class="page active">
                <div class="page-header">
                    <h1>Quote Calculator</h1>
                </div>

                <div class="quote-layout">
                    <div class="quote-inputs">
                        <!-- Printer Selection -->
                        <section class="card">
                            <h2>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M6 9V2h12v7M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"/>
                                    <rect x="6" y="14" width="12" height="8"/>
                                </svg>
                                Printer
                            </h2>
                            <div class="form-group">
                                <select id="printer-select">
                                    <option value="">Select a printer...</option>
                                </select>
                            </div>
                        </section>

                        <!-- Print Time -->
                        <section class="card">
                            <h2>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 6v6l4 2"/>
                                </svg>
                                Print Time
                            </h2>
                            <div class="time-grid">
                                <div class="time-field">
                                    <input type="number" id="print-time-days" min="0" value="0">
                                    <label>Days</label>
                                </div>
                                <div class="time-field">
                                    <input type="number" id="print-time-hours" min="0" max="23" value="0">
                                    <label>Hours</label>
                                </div>
                                <div class="time-field">
                                    <input type="number" id="print-time-minutes" min="0" max="59" value="0">
                                    <label>Min</label>
                                </div>
                            </div>
                            <div class="file-upload-section">
                                <label for="gcode-upload" class="btn-upload">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                                    </svg>
                                    Upload .gcode.3mf File
                                </label>
                                <input type="file" id="gcode-upload" accept=".3mf,.gcode.3mf" style="display: none;">
                                <div class="upload-help">
                                    <p><strong>Note:</strong> Only <code>.gcode.3mf</code> files work.</p>
                                    <p><strong>How to get it:</strong> In your slicer, click the arrow next to the print plate and select <strong>"Export Plate Slice File"</strong>.</p>
                                </div>
                                <div id="upload-status" class="upload-status"></div>
                            </div>
                        </section>

                        <!-- Materials -->
                        <section class="card">
                            <h2>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                                Materials Used
                            </h2>
                            <div id="materials-list" class="crud-list"></div>
                            <button class="btn-add" id="add-material-btn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 5v14M5 12h14"/>
                                </svg>
                                Add Material
                            </button>
                        </section>

                        <!-- Extra Costs -->
                        <section class="card">
                            <h2>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/>
                                </svg>
                                Extra Costs
                            </h2>
                            <div id="extra-costs-list" class="crud-list"></div>
                            <button class="btn-add" id="add-extra-cost-btn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 5v14M5 12h14"/>
                                </svg>
                                Add Extra Cost
                            </button>
                        </section>

                        <!-- Labor / Processing Time -->
                        <section class="card">
                            <h2>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/>
                                </svg>
                                Labor
                            </h2>
                            
                            <!-- Pre-processing tasks -->
                            <div class="labor-section">
                                <label class="section-label">Pre-processing</label>
                                <div id="pre-labor-list" class="labor-task-list"></div>
                                <button class="btn-add-small" onclick="addLaborTask('pre')">+ Add task</button>
                            </div>
                            
                            <!-- Post-processing tasks -->
                            <div class="labor-section">
                                <label class="section-label">Post-processing</label>
                                <div id="post-labor-list" class="labor-task-list"></div>
                                <button class="btn-add-small" onclick="addLaborTask('post')">+ Add task</button>
                            </div>
                        </section>

                        <!-- Pricing Mode -->
                        <section class="card">
                            <h2>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 14l6-6"/>
                                    <circle cx="9.5" cy="9.5" r="1.5"/>
                                    <circle cx="14.5" cy="14.5" r="1.5"/>
                                    <rect x="2" y="2" width="20" height="20" rx="5"/>
                                </svg>
                                Pricing Mode
                            </h2>
                            <div class="pricing-modes">
                                <label class="pricing-mode-option active">
                                    <input type="radio" name="pricing-mode" value="profit-percent" checked>
                                    <span class="option-content">
                                        <strong>Profit Margin</strong>
                                        <small>Add percentage to cost</small>
                                    </span>
                                </label>
                                <label class="pricing-mode-option">
                                    <input type="radio" name="pricing-mode" value="price-per-hour">
                                    <span class="option-content">
                                        <strong>Hourly Rate</strong>
                                        <small>Price per print hour</small>
                                    </span>
                                </label>
                                <label class="pricing-mode-option">
                                    <input type="radio" name="pricing-mode" value="fixed-price">
                                    <span class="option-content">
                                        <strong>Fixed Price</strong>
                                        <small>Set final price</small>
                                    </span>
                                </label>
                            </div>
                            <div class="pricing-input" id="profit-percent-input">
                                <label>Profit Margin</label>
                                <div class="input-with-suffix">
                                    <input type="number" id="profit-percent" value="30" min="0" step="1">
                                    <span class="suffix">%</span>
                                </div>
                            </div>
                            <div class="pricing-input hidden" id="price-per-hour-input">
                                <label>Price per Hour</label>
                                <div class="input-with-prefix">
                                    <span class="prefix">$</span>
                                    <input type="number" id="price-per-hour" value="0" min="0" step="0.01">
                                </div>
                            </div>
                            <div class="pricing-input hidden" id="fixed-price-input">
                                <label>Final Price</label>
                                <div class="input-with-prefix">
                                    <span class="prefix">$</span>
                                    <input type="number" id="fixed-price" value="0" min="0" step="0.01">
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Quote Results (Always Visible) -->
                    <div class="quote-results">
                        <div class="results-card">
                            <h2>Quote Summary</h2>
                            
                            <!-- Final Price (Always Visible) -->
                            <div class="final-price-section">
                                <div class="final-price">
                                    <span class="final-price-label">Final Price</span>
                                    <span class="final-price-value" id="final-price">$0.00</span>
                                </div>
                                <div class="price-metrics">
                                    <div class="metric">
                                        <span class="metric-value" id="profit-margin-result">0%</span>
                                        <span class="metric-label">Profit</span>
                                    </div>
                                    <div class="metric">
                                        <span class="metric-value" id="price-per-hour-result">$0.00</span>
                                        <span class="metric-label">Per Hour</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Expandable Cost Breakdown -->
                            <div class="cost-breakdown-toggle" id="cost-breakdown-toggle">
                                <span class="toggle-label">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M9 5l7 7-7 7"/>
                                    </svg>
                                    Cost Breakdown
                                </span>
                                <span class="toggle-total" id="total-cost-mini">$0.00</span>
                            </div>
                            
                            <div class="results-breakdown" id="results-breakdown">
                                <!-- Material Cost -->
                                <div class="result-row has-detail">
                                    <span class="result-label">
                                        <span class="expand-arrow">‚Ä∫</span>
                                        Material Cost
                                    </span>
                                    <span class="result-value" id="material-cost">$0.00</span>
                                </div>
                                <div class="result-math" id="material-math"></div>
                                
                                <!-- Electricity -->
                                <div class="result-row has-detail">
                                    <span class="result-label">
                                        <span class="expand-arrow">‚Ä∫</span>
                                        Electricity
                                    </span>
                                    <span class="result-value" id="electricity-cost">$0.00</span>
                                </div>
                                <div class="result-math" id="electricity-math"></div>
                                
                                <!-- Machine Cost -->
                                <div class="result-row has-detail">
                                    <span class="result-label">
                                        <span class="expand-arrow">‚Ä∫</span>
                                        Machine Cost
                                    </span>
                                    <span class="result-value" id="depreciation-cost">$0.00</span>
                                </div>
                                <div class="result-math" id="depreciation-math"></div>
                                
                                <!-- Labor Cost -->
                                <div class="result-row has-detail">
                                    <span class="result-label">
                                        <span class="expand-arrow">‚Ä∫</span>
                                        Labor Cost
                                    </span>
                                    <span class="result-value" id="labor-cost">$0.00</span>
                                </div>
                                <div class="result-math" id="labor-math"></div>
                                
                                <!-- Extra Costs -->
                                <div class="result-row">
                                    <span class="result-label">Extra Costs</span>
                                    <span class="result-value" id="extra-cost">$0.00</span>
                                </div>
                                
                                <!-- Total -->
                                <div class="result-row total-row">
                                    <span class="result-label">Total Cost</span>
                                    <span class="result-value" id="total-cost">$0.00</span>
                                </div>
                            </div>
                            
                            <div class="print-info">
                                <div class="info-item">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M12 6v6l4 2"/>
                                    </svg>
                                    <span id="total-time-display">0h 0m</span>
                                </div>
                            </div>
                            
                            <!-- Quote Actions -->
                            <div class="quote-actions">
                                <button class="btn-primary" id="save-quote-btn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                                        <path d="M17 21v-8H7v8M7 3v5h8"/>
                                    </svg>
                                    Save Quote
                                </button>
                                <button class="btn-secondary" id="load-quote-btn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                                    </svg>
                                    Load Quote
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Printers Page -->
            <div id="printers-page" class="page">
                <div class="page-header">
                    <h1>Printers</h1>
                    <p class="page-subtitle">Manage your 3D printers</p>
                    <button class="btn-primary" id="add-printer-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                        Add Printer
                    </button>
                </div>
                <div id="printers-list" class="items-grid"></div>
            </div>

            <!-- Materials Page -->
            <div id="materials-page" class="page">
                <div class="page-header">
                    <h1>Materials</h1>
                    <p class="page-subtitle">Manage your filaments and materials</p>
                    <button class="btn-primary" id="add-filament-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                        Add Material
                    </button>
                </div>
                <div id="filaments-list" class="items-grid"></div>
            </div>

            <!-- Tutorial Page -->
            <div id="tutorial-page" class="page">
                <div class="page-header">
                    <h1>Tutorial</h1>
                    <p class="page-subtitle">Complete guide to using the 3D Print Quote Generator</p>
                </div>
                
                <div class="tutorial-content">
                    <!-- Getting Started -->
                    <section class="tutorial-section">
                        <h2>üöÄ Getting Started</h2>
                        <div class="tutorial-step">
                            <h3>1. Database Connection</h3>
                            <p>When you first open the app, you'll see a database connection modal. A file connection is required to use the application.</p>
                            <img src="screenshots/database-modal.png" alt="Database Connection Modal" class="tutorial-image">
                            <p class="tutorial-note">üí° <strong>What is this file?</strong> The database file is simply a local file on your computer that saves your printer and material information. This way, you don't need to type in all your printer settings and material prices every time you use the app - they're saved and loaded automatically!</p>
                            <p><strong>Options:</strong></p>
                            <ul>
                                <li><strong>Create New Database:</strong> Creates a new JSON file on your computer to store your printer and material data locally</li>
                                <li><strong>Open Existing File:</strong> Load your previously saved printer and material information from an existing file</li>
                            </ul>
                            <p class="tutorial-tip">üí° The modal will persist until you successfully connect a file to ensure your data is always saved. Once connected, all your printers and materials will be saved automatically as you add or edit them.</p>
                        </div>
                    </section>

                    <!-- Printer Management -->
                    <section class="tutorial-section">
                        <h2>üñ®Ô∏è Printer Management</h2>
                        <div class="tutorial-step">
                            <h3>Adding a Printer</h3>
                            <p>Navigate to the <strong>Printers</strong> page and click "Add Printer". Fill in your printer details:</p>
                            <img src="screenshots/printers.png" alt="Printer Management" class="tutorial-image">
                            <div class="tutorial-details">
                                <h4>Basic Settings:</h4>
                                <ul>
                                    <li><strong>Name:</strong> Give your printer a descriptive name</li>
                                    <li><strong>Power (kW):</strong> Power consumption (e.g., 0.22 kW for desktop printers)</li>
                                    <li><strong>Cost per kWh:</strong> Your electricity rate (check your utility bill)</li>
                                </ul>
                                <h4>Machine Cost:</h4>
                                <ul>
                                    <li><strong>Cost ($):</strong> Purchase price of your printer</li>
                                    <li><strong>Lifetime (hrs):</strong> Expected operating hours (e.g., 5000 hours)</li>
                                </ul>
                                <h4>Scheduled Maintenance:</h4>
                                <p>Click "Add Maintenance Task" to set up periodic maintenance:</p>
                                <ul>
                                    <li><strong>Task Name:</strong> Description (e.g., "Grease & Oil")</li>
                                    <li><strong>Cost ($):</strong> Cost of the maintenance</li>
                                    <li><strong>Interval (hrs):</strong> How often needed (e.g., every 3000 hours)</li>
                                </ul>
                                <p class="tutorial-example">Example: After 3000 hours, perform Grease & Oil maintenance for $20</p>
                            </div>
                        </div>
                    </section>

                    <!-- Material Management -->
                    <section class="tutorial-section">
                        <h2>üßµ Material Management</h2>
                        <div class="tutorial-step">
                            <h3>Adding Materials</h3>
                            <p>Navigate to the <strong>Materials</strong> page and click "Add Material":</p>
                            <img src="screenshots/materials.png" alt="Material Management" class="tutorial-image">
                            <div class="tutorial-details">
                                <ul>
                                    <li><strong>Name:</strong> Material type (PLA, ABS, PETG, etc.)</li>
                                    <li><strong>Price per kg:</strong> Cost per kilogram (include shipping if buying online)</li>
                                </ul>
                                <p class="tutorial-example">Example: PLA at $30/kg, ABS at $35/kg</p>
                            </div>
                        </div>
                    </section>

                    <!-- Quote Calculator -->
                    <section class="tutorial-section">
                        <h2>üìä Creating Quotes</h2>
                        <div class="tutorial-step">
                            <h3>Step-by-Step Quote Creation</h3>
                            <img src="screenshots/quote-calculator.png" alt="Quote Calculator" class="tutorial-image">
                            
                            <h4>Step 1: Select Printer</h4>
                            <p>Choose the printer you'll use for this job from the dropdown.</p>

                            <h4>Step 2: Enter Print Time</h4>
                            <p>Enter the estimated print time in days, hours, and minutes.</p>
                            <p class="tutorial-tip">üí° <strong>Tip:</strong> You can upload a .gcode.3mf file to auto-fill this (see below)</p>

                            <h4>Step 3: Add Materials</h4>
                            <p>Click "Add Material" and:</p>
                            <ul>
                                <li>Select the material from the dropdown</li>
                                <li>Enter the quantity in <strong>grams</strong> (the "g" suffix is shown automatically)</li>
                            </ul>
                            <p class="tutorial-example">For multi-color prints, add multiple material rows - one for each color!</p>

                            <h4>Step 4: Add Labor Tasks</h4>
                            <div class="tutorial-details">
                                <p><strong>Pre-Processing:</strong> Tasks like slicing, modeling, file preparation</p>
                                <p><strong>Post-Processing:</strong> Tasks like sanding, painting, assembly</p>
                                <p>For each task, enter:</p>
                                <ul>
                                    <li>Task name (e.g., "Slicing", "Sanding")</li>
                                    <li>Time (hours and minutes)</li>
                                    <li>Hourly rate ($/h)</li>
                                </ul>
                                <p class="tutorial-example">Example: Slicing - 5 minutes @ $10/hour, Modeling - 1 hour @ $50/hour</p>
                            </div>

                            <h4>Step 5: Choose Pricing Mode</h4>
                            <div class="tutorial-details">
                                <p><strong>Profit Margin (%):</strong> Add a percentage markup to your costs (recommended)</p>
                                <p><strong>Hourly Rate:</strong> Set a fixed price per print hour</p>
                                <p><strong>Fixed Price:</strong> Manually set the final price</p>
                            </div>

                            <h4>Viewing the Quote</h4>
                            <p>The <strong>Quote Summary</strong> panel shows your final price. Click "Cost Breakdown" to see detailed calculations for each cost component.</p>
                        </div>
                    </section>

                    <!-- Uploading Files -->
                    <section class="tutorial-section">
                        <h2>üìÅ Uploading .gcode.3mf Files</h2>
                        <div class="tutorial-step">
                            <h3>How to Get .gcode.3mf Files</h3>
                            <p>In your slicer (Bambu Studio, PrusaSlicer, etc.):</p>
                            <ol>
                                <li>Prepare your print and slice it</li>
                                <li>Look for the <strong>print plate</strong> area</li>
                                <li>Click the <strong>arrow/dropdown</strong> next to the print plate</li>
                                <li>Select <strong>"Export Plate Slice File"</strong> or <strong>"Export .gcode.3mf"</strong></li>
                                <li>Save the file</li>
                            </ol>
                            <p class="tutorial-warning">‚ö†Ô∏è <strong>Important:</strong> Only .gcode.3mf files work (not regular .3mf files). These contain the actual G-code with print time and material usage data.</p>

                            <h3>Uploading the File</h3>
                            <ol>
                                <li>In the <strong>Print Time</strong> section, click "Upload .gcode.3mf File"</li>
                                <li>Select your .gcode.3mf file</li>
                                <li>The app will automatically:
                                    <ul>
                                        <li>Extract print time and convert to days/hours/minutes</li>
                                        <li>Extract material usage (weight in grams) for each color</li>
                                        <li>Create material entries for each filament used</li>
                                    </ul>
                                </li>
                            </ol>
                            <p class="tutorial-note">üí° You'll still need to select the appropriate material types and add any labor tasks or extra costs.</p>
                        </div>
                    </section>

                    <!-- Saving and Loading -->
                    <section class="tutorial-section">
                        <h2>üíæ Saving and Loading Quotes</h2>
                        <div class="tutorial-step">
                            <h3>Saving a Quote</h3>
                            <p>After filling in all your quote details, click the <strong>"Save Quote"</strong> button.</p>
                            
                            <h4>If you uploaded a .gcode.3mf file:</h4>
                            <ul>
                                <li>The quote data will be <strong>embedded</strong> in the .gcode.3mf file</li>
                                <li>A new file will be downloaded: <code>filename-withQuote.gcode.3mf</code></li>
                                <li>This file contains both the G-code AND your quote data</li>
                                <li>Perfect for sharing with clients or keeping records</li>
                            </ul>

                            <h4>If no .gcode.3mf file was uploaded:</h4>
                            <ul>
                                <li>The quote will be saved as a <strong>JSON file</strong></li>
                                <li>Filename: <code>quote_YYYY-MM-DDTHH-MM-SS.json</code></li>
                                <li>You can load this later to restore the quote</li>
                            </ul>

                            <h3>Loading a Saved Quote</h3>
                            <ol>
                                <li>Click the <strong>"Load Quote"</strong> button</li>
                                <li>Select either:
                                    <ul>
                                        <li>A .gcode.3mf file with embedded quote data</li>
                                        <li>A .json quote file</li>
                                    </ul>
                                </li>
                            </ol>
                            <p>The app will restore all your settings: printer, print time, materials, labor tasks, and pricing mode.</p>
                        </div>
                    </section>

                    <!-- Tips -->
                    <section class="tutorial-section">
                        <h2>üí° Tips and Best Practices</h2>
                        <div class="tutorial-step">
                            <h3>Accurate Cost Calculation</h3>
                            <ul>
                                <li><strong>Measure Actual Power:</strong> Use a power meter to measure your printer's actual consumption</li>
                                <li><strong>Track Material Usage:</strong> Weigh spools before/after prints or use .gcode.3mf upload for accuracy</li>
                                <li><strong>Set Realistic Lifetime:</strong> Consider your printer's expected lifespan and maintenance needs</li>
                                <li><strong>Document Maintenance:</strong> Keep receipts and track maintenance intervals</li>
                            </ul>

                            <h3>Pricing Strategy</h3>
                            <ul>
                                <li><strong>Start with Profit Margin:</strong> Begin with 20-30% margin and adjust based on market</li>
                                <li><strong>Use Hourly Rate for Complex Jobs:</strong> When labor is the main cost driver</li>
                                <li><strong>Factor in Overhead:</strong> Use "Extra Costs" for business expenses</li>
                            </ul>

                            <h3>File Management</h3>
                            <ul>
                                <li><strong>Backup Your Database:</strong> Keep your database.json file safe and backed up</li>
                                <li><strong>Organize Saved Quotes:</strong> Use descriptive filenames and keep a folder for client quotes</li>
                                <li><strong>Use .gcode.3mf Files:</strong> Always export from your slicer and embed quotes for complete records</li>
                            </ul>
                        </div>
                    </section>

                    <!-- Support -->
                    <section class="tutorial-section">
                        <h2>üÜò Need Help?</h2>
                        <div class="tutorial-step">
                            <p>If you encounter any issues or have questions:</p>
                            <ul>
                                <li>üêõ <a href="https://github.com/rogeriocamorim/3dPrinterCalculator/issues" target="_blank">Report Issues on GitHub</a></li>
                                <li>üí∞ <a href="https://github.com/sponsors/rogeriocamorim" target="_blank">Support the Project</a></li>
                            </ul>
                        </div>
                    </section>
                </div>
            </div>
        </main>
    </div>

    <!-- Hidden file input for fallback -->
    <input type="file" id="file-input" accept=".json" style="display: none;">
    <!-- Hidden file input for loading quotes -->
    <input type="file" id="quote-load-input" accept=".json,.3mf" style="display: none;">

    <!-- JSZip for parsing .3mf files -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
