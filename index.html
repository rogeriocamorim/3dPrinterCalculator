<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Print Quote Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Database Connection Status -->
    <div id="db-status" class="db-status disconnected">
        <div class="db-status-indicator"></div>
        <span class="db-status-text">No database connected</span>
        <button class="db-status-btn" id="connect-db-btn">Connect</button>
    </div>

    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">3D</div>
                <span>PrintQuote</span>
            </div>
            <nav class="nav-menu">
                <button class="nav-item active" data-page="quote">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 7h6m-6 4h6m-6 4h4M5 3h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2z"/>
                    </svg>
                    Quote Calculator
                </button>
                <button class="nav-item" data-page="printers">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 9V2h12v7M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"/>
                        <rect x="6" y="14" width="12" height="8"/>
                    </svg>
                    Printers
                </button>
                <button class="nav-item" data-page="materials">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                    Materials
                </button>
                <button class="nav-item" data-page="tutorial">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 20h9M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/>
                    </svg>
                    Tutorial
                </button>
            </nav>
            <div class="sidebar-footer">
                <div class="version">v2.0</div>
                <a href="https://github.com/sponsors/rogeriocamorim" target="_blank" rel="noopener noreferrer" class="sponsor-link">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    <span>GitHub Sponsor</span>
                </a>
                <a href="https://ko-fi.com/rogeriocamorim" target="_blank" rel="noopener noreferrer" class="sponsor-link kofi-link">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M23.881 8.948c-.796-4.583-4.702-8.049-9.44-8.049C6.485.899 1.892 5.394 1.892 10.693c0 2.596.96 4.938 2.508 6.715-4.064-.178-7.4-3.64-7.4-7.636C-3 4.372 4.485-.102 11.441-.102c6.177 0 11.44 4.372 11.44 10.693 0 3.996-3.336 7.458-7.4 7.636 1.548 1.777 2.508 4.119 2.508 6.715 0 5.3-4.593 9.794-10.549 9.794-4.738 0-8.644-3.466-9.44-8.049-.796-4.583.96-9.182 5.298-11.307 4.338-2.125 10.14-2.125 14.478 0 4.338 2.125 6.094 6.724 5.298 11.307z"/>
                    </svg>
                    <span>Ko-fi</span>
                </a>
                <a href="https://github.com/rogeriocamorim/3dPrinterCalculator/issues" target="_blank" rel="noopener noreferrer" class="issues-link">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v6M12 16h.01"/>
                    </svg>
                    <span>Report Issue</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Quote Page -->
            <div id="quote-page" class="page active">
                <div class="page-header">
                    <h1>Quote Calculator</h1>
                </div>

                <div class="quote-layout">
                    <div class="quote-inputs">
                        <!-- Printer Selection -->
                        <section class="card">
                            <h2>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M6 9V2h12v7M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"/>
                                    <rect x="6" y="14" width="12" height="8"/>
                                </svg>
                                Printer
                            </h2>
                            <div class="form-group">
                                <select id="printer-select">
                                    <option value="">Select a printer...</option>
                                </select>
                            </div>
                        </section>

                        <!-- Print Time -->
                        <section class="card">
                            <h2>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 6v6l4 2"/>
                                </svg>
                                Print Time
                            </h2>
                            <div class="time-grid">
                                <div class="time-field">
                                    <input type="number" id="print-time-days" min="0" value="0">
                                    <label>Days</label>
                                </div>
                                <div class="time-field">
                                    <input type="number" id="print-time-hours" min="0" max="23" value="0">
                                    <label>Hours</label>
                                </div>
                                <div class="time-field">
                                    <input type="number" id="print-time-minutes" min="0" max="59" value="0">
                                    <label>Min</label>
                                </div>
                            </div>
                            <div class="file-upload-section">
                                <label for="gcode-upload" class="btn-upload">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                                    </svg>
                                    Upload .gcode.3mf File
                                </label>
                                <input type="file" id="gcode-upload" accept=".3mf,.gcode.3mf" style="display: none;">
                                <div class="upload-help">
                                    <p><strong>Note:</strong> Only <code>.gcode.3mf</code> files work.</p>
                                    <p><strong>How to get it:</strong> In your slicer, click the arrow next to the print plate and select <strong>"Export Plate Slice File"</strong>.</p>
                                </div>
                                <div id="upload-status" class="upload-status"></div>
                            </div>
                        </section>

                        <!-- Materials -->
                        <section class="card">
                            <h2>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                                Materials Used
                            </h2>
                            <div id="materials-list" class="crud-list"></div>
                            <button class="btn-add" id="add-material-btn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 5v14M5 12h14"/>
                                </svg>
                                Add Material
                            </button>
                        </section>

                        <!-- Extra Costs -->
                        <section class="card">
                            <h2>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/>
                                </svg>
                                Extra Costs
                            </h2>
                            <div id="extra-costs-list" class="crud-list"></div>
                            <button class="btn-add" id="add-extra-cost-btn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 5v14M5 12h14"/>
                                </svg>
                                Add Extra Cost
                            </button>
                        </section>

                        <!-- Labor / Processing Time -->
                        <section class="card">
                            <h2>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/>
                                </svg>
                                Labor
                            </h2>
                            
                            <!-- Pre-processing tasks -->
                            <div class="labor-section">
                                <label class="section-label">Pre-processing</label>
                                <div id="pre-labor-list" class="labor-task-list"></div>
                                <button class="btn-add-small" onclick="addLaborTask('pre')">+ Add task</button>
                            </div>
                            
                            <!-- Post-processing tasks -->
                            <div class="labor-section">
                                <label class="section-label">Post-processing</label>
                                <div id="post-labor-list" class="labor-task-list"></div>
                                <button class="btn-add-small" onclick="addLaborTask('post')">+ Add task</button>
                            </div>
                        </section>

                        <!-- Pricing Mode -->
                        <section class="card">
                            <h2>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 14l6-6"/>
                                    <circle cx="9.5" cy="9.5" r="1.5"/>
                                    <circle cx="14.5" cy="14.5" r="1.5"/>
                                    <rect x="2" y="2" width="20" height="20" rx="5"/>
                                </svg>
                                Pricing Mode
                            </h2>
                            <div class="pricing-modes">
                                <label class="pricing-mode-option active">
                                    <input type="radio" name="pricing-mode" value="profit-percent" checked>
                                    <span class="option-content">
                                        <strong>Profit Margin</strong>
                                        <small>Add percentage to cost</small>
                                    </span>
                                </label>
                                <label class="pricing-mode-option">
                                    <input type="radio" name="pricing-mode" value="price-per-hour">
                                    <span class="option-content">
                                        <strong>Hourly Rate</strong>
                                        <small>Price per print hour</small>
                                    </span>
                                </label>
                                <label class="pricing-mode-option">
                                    <input type="radio" name="pricing-mode" value="fixed-price">
                                    <span class="option-content">
                                        <strong>Fixed Price</strong>
                                        <small>Set final price</small>
                                    </span>
                                </label>
                            </div>
                            <div class="pricing-input" id="profit-percent-input">
                                <label>Profit Margin</label>
                                <div class="input-with-suffix">
                                    <input type="number" id="profit-percent" value="30" min="0" step="1">
                                    <span class="suffix">%</span>
                                </div>
                            </div>
                            <div class="pricing-input hidden" id="price-per-hour-input">
                                <label>Price per Hour</label>
                                <div class="input-with-prefix">
                                    <span class="prefix">$</span>
                                    <input type="number" id="price-per-hour" value="0" min="0" step="0.01">
                                </div>
                            </div>
                            <div class="pricing-input hidden" id="fixed-price-input">
                                <label>Final Price</label>
                                <div class="input-with-prefix">
                                    <span class="prefix">$</span>
                                    <input type="number" id="fixed-price" value="0" min="0" step="0.01">
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Quote Results (Always Visible) -->
                    <div class="quote-results">
                        <div class="results-card">
                            <h2>Quote Summary</h2>
                            
                            <!-- Final Price (Always Visible) -->
                            <div class="final-price-section">
                                <div class="final-price">
                                    <span class="final-price-label">Final Price</span>
                                    <span class="final-price-value" id="final-price">$0.00</span>
                                </div>
                                <div class="price-metrics">
                                    <div class="metric">
                                        <span class="metric-value" id="profit-margin-result">0%</span>
                                        <span class="metric-label">Profit</span>
                                    </div>
                                    <div class="metric">
                                        <span class="metric-value" id="price-per-hour-result">$0.00</span>
                                        <span class="metric-label">Per Hour</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Expandable Cost Breakdown -->
                            <div class="cost-breakdown-toggle" id="cost-breakdown-toggle">
                                <span class="toggle-label">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M9 5l7 7-7 7"/>
                                    </svg>
                                    Cost Breakdown
                                </span>
                                <span class="toggle-total" id="total-cost-mini">$0.00</span>
                            </div>
                            
                            <div class="results-breakdown" id="results-breakdown">
                                <!-- Material Cost -->
                                <div class="result-row has-detail">
                                    <span class="result-label">
                                        <span class="expand-arrow">‚Ä∫</span>
                                        Material Cost
                                    </span>
                                    <span class="result-value" id="material-cost">$0.00</span>
                                </div>
                                <div class="result-math" id="material-math"></div>
                                
                                <!-- Electricity -->
                                <div class="result-row has-detail">
                                    <span class="result-label">
                                        <span class="expand-arrow">‚Ä∫</span>
                                        Electricity
                                    </span>
                                    <span class="result-value" id="electricity-cost">$0.00</span>
                                </div>
                                <div class="result-math" id="electricity-math"></div>
                                
                                <!-- Machine Cost -->
                                <div class="result-row has-detail">
                                    <span class="result-label">
                                        <span class="expand-arrow">‚Ä∫</span>
                                        Machine Cost
                                    </span>
                                    <span class="result-value" id="depreciation-cost">$0.00</span>
                                </div>
                                <div class="result-math" id="depreciation-math"></div>
                                
                                <!-- Labor Cost -->
                                <div class="result-row has-detail">
                                    <span class="result-label">
                                        <span class="expand-arrow">‚Ä∫</span>
                                        Labor Cost
                                    </span>
                                    <span class="result-value" id="labor-cost">$0.00</span>
                                </div>
                                <div class="result-math" id="labor-math"></div>
                                
                                <!-- Extra Costs -->
                                <div class="result-row">
                                    <span class="result-label">Extra Costs</span>
                                    <span class="result-value" id="extra-cost">$0.00</span>
                                </div>
                                
                                <!-- Total -->
                                <div class="result-row total-row">
                                    <span class="result-label">Total Cost</span>
                                    <span class="result-value" id="total-cost">$0.00</span>
                                </div>
                            </div>
                            
                            <div class="print-info">
                                <div class="info-item">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M12 6v6l4 2"/>
                                    </svg>
                                    <span id="total-time-display">0h 0m</span>
                                </div>
                            </div>
                            
                            <!-- Quote Actions -->
                            <div class="quote-actions">
                                <button class="btn-primary" id="save-quote-btn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                                        <path d="M17 21v-8H7v8M7 3v5h8"/>
                                    </svg>
                                    Save Quote
                                </button>
                                <button class="btn-secondary" id="load-quote-btn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                                    </svg>
                                    Load Quote
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Printers Page -->
            <div id="printers-page" class="page">
                <div class="page-header">
                    <h1>Printers</h1>
                    <p class="page-subtitle">Manage your 3D printers</p>
                    <button class="btn-primary" id="add-printer-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                        Add Printer
                    </button>
                </div>
                <div id="printers-list" class="items-grid"></div>
            </div>

            <!-- Materials Page -->
            <div id="materials-page" class="page">
                <div class="page-header">
                    <h1>Materials</h1>
                    <p class="page-subtitle">Manage your filaments and materials</p>
                    <button class="btn-primary" id="add-filament-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                        Add Material
                    </button>
                </div>
                <div id="filaments-list" class="items-grid"></div>
            </div>

            <!-- Tutorial Page -->
            <div id="tutorial-page" class="page">
                <!-- Hero Section -->
                <div class="tutorial-hero">
                    <div class="tutorial-hero-content">
                        <h1>Getting Started</h1>
                        <p>Learn how to calculate accurate 3D printing costs in minutes</p>
                    </div>
                    <div class="tutorial-quick-nav">
                        <a href="#tut-setup" class="quick-nav-item">
                            <span class="quick-nav-number">1</span>
                            <span class="quick-nav-label">Setup</span>
                        </a>
                        <a href="#tut-printers" class="quick-nav-item">
                            <span class="quick-nav-number">2</span>
                            <span class="quick-nav-label">Printers</span>
                        </a>
                        <a href="#tut-materials" class="quick-nav-item">
                            <span class="quick-nav-number">3</span>
                            <span class="quick-nav-label">Materials</span>
                        </a>
                        <a href="#tut-quote" class="quick-nav-item">
                            <span class="quick-nav-number">4</span>
                            <span class="quick-nav-label">Create Quote</span>
                        </a>
                    </div>
                </div>
                
                <div class="tutorial-content">
                    <!-- Step 1: Setup -->
                    <section id="tut-setup" class="tutorial-card">
                        <div class="tutorial-card-header">
                            <div class="tutorial-step-badge">1</div>
                            <div class="tutorial-card-title">
                                <h2>Initial Setup</h2>
                                <p>Connect your database file</p>
                            </div>
                        </div>
                        <div class="tutorial-card-body">
                            <div class="tutorial-grid">
                                <div class="tutorial-text">
                                    <p>When you first open the app, you'll see a connection modal. Choose one option:</p>
                                    <div class="tutorial-options">
                                        <div class="tutorial-option">
                                            <div class="option-icon primary">+</div>
                                            <div class="option-content">
                                                <strong>Create New Database</strong>
                                                <span>Start fresh with a new file</span>
                                            </div>
                                        </div>
                                        <div class="tutorial-option">
                                            <div class="option-icon secondary">üìÇ</div>
                                            <div class="option-content">
                                                <strong>Open Existing File</strong>
                                                <span>Load your saved data</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tutorial-callout info">
                                        <div class="callout-icon">üí°</div>
                                        <div class="callout-content">
                                            <strong>What's the database file?</strong>
                                            <p>A simple JSON file on your computer that stores your printer and material settings. Your data is saved automatically so you don't have to re-enter it every time!</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="tutorial-media">
                                    <img src="screenshots/database-modal.png" alt="Database Connection Modal">
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Step 2: Printers -->
                    <section id="tut-printers" class="tutorial-card">
                        <div class="tutorial-card-header">
                            <div class="tutorial-step-badge">2</div>
                            <div class="tutorial-card-title">
                                <h2>Add Your Printers</h2>
                                <p>Configure printer settings and costs</p>
                            </div>
                        </div>
                        <div class="tutorial-card-body">
                            <div class="tutorial-grid reverse">
                                <div class="tutorial-media">
                                    <img src="screenshots/printers.png" alt="Printer Management">
                                </div>
                                <div class="tutorial-text">
                                    <p>Go to <strong>Printers</strong> ‚Üí Click <strong>Add Printer</strong></p>
                                    
                                    <div class="tutorial-fields">
                                        <div class="field-group">
                                            <h4>‚ö° Power Settings</h4>
                                            <div class="field-item"><code>Power (kW)</code> ‚Äî Printer consumption (e.g., 0.22)</div>
                                            <div class="field-item"><code>Cost/kWh</code> ‚Äî Your electricity rate</div>
                                        </div>
                                        <div class="field-group">
                                            <h4>üí∞ Machine Cost</h4>
                                            <div class="field-item"><code>Cost ($)</code> ‚Äî Purchase price</div>
                                            <div class="field-item"><code>Lifetime (hrs)</code> ‚Äî Expected operating hours</div>
                                        </div>
                                        <div class="field-group">
                                            <h4>üîß Maintenance</h4>
                                            <p class="field-desc">Add recurring maintenance tasks with cost and interval</p>
                                            <div class="field-example">Example: "Belt Change" ‚Äî $15 every 5000 hours</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Step 3: Materials -->
                    <section id="tut-materials" class="tutorial-card">
                        <div class="tutorial-card-header">
                            <div class="tutorial-step-badge">3</div>
                            <div class="tutorial-card-title">
                                <h2>Add Materials</h2>
                                <p>Set up your filament library</p>
                            </div>
                        </div>
                        <div class="tutorial-card-body">
                            <div class="tutorial-grid">
                                <div class="tutorial-text">
                                    <p>Go to <strong>Materials</strong> ‚Üí Click <strong>Add Material</strong></p>
                                    
                                    <div class="tutorial-fields simple">
                                        <div class="field-item"><code>Name</code> ‚Äî Material type (PLA, ABS, PETG...)</div>
                                        <div class="field-item"><code>Price/kg</code> ‚Äî Cost per kilogram</div>
                                    </div>

                                    <div class="tutorial-callout tip">
                                        <div class="callout-icon">üí°</div>
                                        <div class="callout-content">
                                            <strong>Pro Tip</strong>
                                            <p>Include shipping costs in your price per kg for more accurate quotes!</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="tutorial-media">
                                    <img src="screenshots/materials.png" alt="Material Management">
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Step 4: Create Quote -->
                    <section id="tut-quote" class="tutorial-card featured">
                        <div class="tutorial-card-header">
                            <div class="tutorial-step-badge">4</div>
                            <div class="tutorial-card-title">
                                <h2>Create a Quote</h2>
                                <p>Calculate your print job cost</p>
                            </div>
                        </div>
                        <div class="tutorial-card-body">
                            <div class="tutorial-media full-width">
                                <img src="screenshots/quote-calculator.png" alt="Quote Calculator">
                            </div>
                            
                            <div class="tutorial-steps-list">
                                <div class="mini-step">
                                    <span class="mini-step-num">A</span>
                                    <div class="mini-step-content">
                                        <strong>Select Printer</strong>
                                        <p>Choose from your configured printers</p>
                                    </div>
                                </div>
                                <div class="mini-step">
                                    <span class="mini-step-num">B</span>
                                    <div class="mini-step-content">
                                        <strong>Enter Print Time</strong>
                                        <p>Days, hours, minutes ‚Äî or upload a .gcode.3mf file</p>
                                    </div>
                                </div>
                                <div class="mini-step">
                                    <span class="mini-step-num">C</span>
                                    <div class="mini-step-content">
                                        <strong>Add Materials</strong>
                                        <p>Select material and enter weight in grams</p>
                                    </div>
                                </div>
                                <div class="mini-step">
                                    <span class="mini-step-num">D</span>
                                    <div class="mini-step-content">
                                        <strong>Add Labor (Optional)</strong>
                                        <p>Pre/post-processing time √ó hourly rate</p>
                                    </div>
                                </div>
                                <div class="mini-step">
                                    <span class="mini-step-num">E</span>
                                    <div class="mini-step-content">
                                        <strong>Set Pricing Mode</strong>
                                        <p>Profit margin %, hourly rate, or fixed price</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Advanced Section -->
                    <div class="tutorial-section-divider">
                        <span>Advanced Features</span>
                    </div>

                    <!-- Upload Files -->
                    <section class="tutorial-card compact">
                        <div class="tutorial-card-header">
                            <div class="tutorial-step-badge mini">üìÅ</div>
                            <div class="tutorial-card-title">
                                <h2>Upload .gcode.3mf Files</h2>
                                <p>Auto-fill print time and material usage</p>
                            </div>
                        </div>
                        <div class="tutorial-card-body">
                            <div class="two-column">
                                <div class="column">
                                    <h4>How to Export</h4>
                                    <ol class="numbered-list">
                                        <li>Slice your model in Bambu Studio / PrusaSlicer</li>
                                        <li>Click the arrow next to the print plate</li>
                                        <li>Select <strong>"Export Plate Slice File"</strong></li>
                                    </ol>
                                </div>
                                <div class="column">
                                    <h4>Then in this App</h4>
                                    <ol class="numbered-list">
                                        <li>Click <strong>"Upload .gcode.3mf File"</strong></li>
                                        <li>Select your exported file</li>
                                        <li>Time & materials are filled automatically!</li>
                                    </ol>
                                </div>
                            </div>
                            <div class="tutorial-callout warning">
                                <div class="callout-icon">‚ö†Ô∏è</div>
                                <div class="callout-content">
                                    <strong>Important:</strong> Only <code>.gcode.3mf</code> files work ‚Äî not regular <code>.3mf</code> files.
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Save & Load -->
                    <section class="tutorial-card compact">
                        <div class="tutorial-card-header">
                            <div class="tutorial-step-badge mini">üíæ</div>
                            <div class="tutorial-card-title">
                                <h2>Save & Load Quotes</h2>
                                <p>Keep records and share with clients</p>
                            </div>
                        </div>
                        <div class="tutorial-card-body">
                            <div class="two-column">
                                <div class="column">
                                    <h4>Save Quote</h4>
                                    <p><strong>With .gcode.3mf uploaded:</strong><br>Quote is embedded in the file ‚Üí downloads as <code>*-withQuote.gcode.3mf</code></p>
                                    <p><strong>Without file:</strong><br>Saved as JSON file</p>
                                </div>
                                <div class="column">
                                    <h4>Load Quote</h4>
                                    <p>Click "Load Quote" and select:</p>
                                    <ul class="simple-list">
                                        <li>A .gcode.3mf with embedded quote</li>
                                        <li>A .json quote file</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Tips Section -->
                    <section class="tutorial-card tips">
                        <div class="tutorial-card-header">
                            <div class="tutorial-step-badge mini">üí°</div>
                            <div class="tutorial-card-title">
                                <h2>Pro Tips</h2>
                                <p>Get the most accurate quotes</p>
                            </div>
                        </div>
                        <div class="tutorial-card-body">
                            <div class="tips-grid">
                                <div class="tip-item">
                                    <div class="tip-icon">‚ö°</div>
                                    <div class="tip-content">
                                        <strong>Measure Real Power</strong>
                                        <p>Use a power meter for accurate consumption data</p>
                                    </div>
                                </div>
                                <div class="tip-item">
                                    <div class="tip-icon">üìä</div>
                                    <div class="tip-content">
                                        <strong>Start with 20-30% Margin</strong>
                                        <p>Adjust based on market and complexity</p>
                                    </div>
                                </div>
                                <div class="tip-item">
                                    <div class="tip-icon">üíæ</div>
                                    <div class="tip-content">
                                        <strong>Backup Your Database</strong>
                                        <p>Keep your JSON file safe and backed up</p>
                                    </div>
                                </div>
                                <div class="tip-item">
                                    <div class="tip-icon">üìÅ</div>
                                    <div class="tip-content">
                                        <strong>Use .gcode.3mf Files</strong>
                                        <p>Most accurate time and material data</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Help Section -->
                    <section class="tutorial-help">
                        <h3>Need Help?</h3>
                        <div class="help-links">
                            <a href="https://github.com/rogeriocamorim/3dPrinterCalculator/issues" target="_blank" class="help-link">
                                <span class="help-icon">üêõ</span>
                                <span>Report an Issue</span>
                            </a>
                            <a href="https://github.com/sponsors/rogeriocamorim" target="_blank" class="help-link">
                                <span class="help-icon">‚ù§Ô∏è</span>
                                <span>Support the Project</span>
                            </a>
                            <a href="https://ko-fi.com/rogeriocamorim" target="_blank" class="help-link">
                                <span class="help-icon">‚òï</span>
                                <span>Buy me a Coffee</span>
                            </a>
                        </div>
                    </section>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-content">
                <p>Developed by <strong>Rogerio Camorim</strong></p>
                <div class="footer-links">
                    <a href="https://github.com/sponsors/rogeriocamorim" target="_blank" rel="noopener noreferrer">GitHub Sponsors</a>
                    <span class="footer-separator">‚Ä¢</span>
                    <a href="https://ko-fi.com/rogeriocamorim" target="_blank" rel="noopener noreferrer">Ko-fi</a>
                    <span class="footer-separator">‚Ä¢</span>
                    <a href="https://github.com/rogeriocamorim/3dPrinterCalculator/issues" target="_blank" rel="noopener noreferrer">Report Issue</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Hidden file input for fallback -->
    <input type="file" id="file-input" accept=".json" style="display: none;">
    <!-- Hidden file input for loading quotes -->
    <input type="file" id="quote-load-input" accept=".json,.3mf" style="display: none;">

    <!-- JSZip for parsing .3mf files -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
